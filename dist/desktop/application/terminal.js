var __extends = (this && this.__extends) || function (d, b) {
    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
    function __() { this.constructor = d; }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
};
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
var core_1 = require('angular2/core');
var common_1 = require('angular2/common');
var shortcut_1 = require('../shortcut/shortcut');
var window_1 = require('../panel/window');
var TerminalCmp = (function (_super) {
    __extends(TerminalCmp, _super);
    function TerminalCmp(elementRef) {
        var _this = this;
        _super.call(this);
        this.shortcuts = [];
        this.width = 630;
        this.height = 400;
        this.element = elementRef.nativeElement;
        this.setDialog();
        setTimeout(function () {
            _this.setTerminal();
        }, 100);
    }
    TerminalCmp.prototype.setTerminal = function () {
        var _this = this;
        var term = new Terminal();
        var socket = io.connect("http://" + window.location.host);
        var term_id = this.config.container_id + 'ยง' + this.config._id;
        socket.emit('createTerminal', term_id, function (term_id) {
            term.on('data', function (data) {
                socket.emit('data' + term_id, data);
            });
            term.open($(_this.element).find('.terminal-window')[0]);
            socket.on('data' + term_id, function (data) {
                console.log(1111, data.toString().replace(/\x1B\[([0-9]{1,2}(;[0-9]{1,2})?)?[m|K]/g, ''));
                term.write(data);
            });
            $(window).resize(function () {
                term.sizeToFit();
                socket.emit('resize' + term_id, {
                    cols: term.cols,
                    rows: term.rows
                });
            });
            $(window).trigger('resize');
        });
    };
    __decorate([
        core_1.Input(), 
        __metadata('design:type', Object)
    ], TerminalCmp.prototype, "config", void 0);
    TerminalCmp = __decorate([
        core_1.Component({
            selector: 'terminal',
            template: window_1.windowTemplate.replace('{{__body__}}', "\n        <div class=\"body\" style=\"overflow-y: auto;height:100%;width:100%;padding-top: 30px;text-align:center\">\n            <div class=\"terminal-window\" style=\"width:100%;height:100%;\"></div>\n        </div>\n    "),
            styles: ["\n\n\n\n      .panel{\n      \tposition: absolute;\n      \tleft:100px;\n      \ttop:100px;\n      \tborder:1px solid #ccc;\n      \tbackground-color:#fff;\n      \tborder-radius:1px;\n      }\n\n\n      .panel .header{\n      \twidth:100%;\n          height:30px;\n          text-align: left;\n      \tbackground-color:#eee;\n      }\n\n      .panel.focus .header  {\n      \tbackground-color:rgba(138,165,204,1);\n      }\n\n      .panel.focus  {\n      \tborder-color:rgba(138,165,204,1);\n      }\n\n      .panel .header .icon{\n          height: 20px;   \t\n          width: 20px;\n          float: left;\n          margin: 4px;\n          background-size: 20px 20px;\n      }\n\n      .panel .header .title{\n          padding-top: 5px;\n          float: left;\n      }\n\n      .panel-title-buttons {\n\n          height:40px;\n          float: right;\n      \tmargin-top: 2px;\n      \tmargin-right: 2px\n      }\n\n\n      .panel-btn {\n          float: right;\n          margin-right: 10px;\n          margin-top: 7px;\n          width:85px;\n          font-size:13px;\n\t\n      }\n\n      .icon-min{\n          background-image:url(../../resource/images/icon/min2.png);\n          width:40px;\n          height:19px;\n          float: left;\n      }\n      .icon-max{\n          background-image:url(../../resource/images/icon/max2.png);\n          width:40px;\n          height:19px;\n          float: left;\n      }\n      .icon-close{\n          background-image:url(../../resource/images/icon/close2.png);\n          width:40px;\n          height:19px;\n          float: left;\n      }\n\n      .icon-min:hover{\n      \tbackground-image:url(../../resource/images/icon/min.png);\n      }\n\n      .icon-max:hover{\n      \tbackground-image:url(../../resource/images/icon/max.png);\n      }\n\n      .icon-close:hover{\n      \tbackground-image:url(../../resource/images/icon/close.png);\n      }\n\n      /*window*/\n      .panel .design-resize-left, .design-resize-right  , .design-resize-bottom , .design-resize-left-bottom , .design-resize-right-bottom{\n      \tbackground:#b7bfca;\n      \tfloat: left;\n      \tposition: absolute;\n      \topacity: 0;                /* Firefox, Safari(WebKit), Opera,chrome/    filter: \"alpha(opacity=60)\"; /* IE 8 */\n      \tfilter: alpha(opacity=0);   /* IE 4-7 */\n      }\n      .design-resize-left{\n      \twidth:4px;\n      \theight: 100%;\n      \tcursor:e-resize; \n      \tleft:0px;\n      \ttop:0px;\n      }\n      .design-resize-right{\n      \twidth:4px;\n      \theight: 100%;\n      \tcursor:e-resize; \n      \tright:0px;\n      \ttop:0px;\n      }\n      .design-resize-bottom{\n      \theight:4px;\n      \twidth:100%;\n      \tcursor:n-resize;\n      \toverflow:hidden; \n      \tleft:0px;\n      \tbottom:0px;\n      }\n      .design-resize-left-bottom{\n      \theight:4px;\n      \twidth:4px;\n      \tcursor:sw-resize; \n      \tleft:0px;\n      \tbottom:0px;\n      }\n      .design-resize-right-bottom{\n      \theight:4px;\n      \twidth:4px;\n      \tcursor:se-resize; \n      \tright:0px;\n      \tbottom:0px;\n      }\n    "],
            directives: [common_1.NgStyle, shortcut_1.ShortcutCmp]
        }),
        __param(0, core_1.Inject(core_1.ElementRef)), 
        __metadata('design:paramtypes', [core_1.ElementRef])
    ], TerminalCmp);
    return TerminalCmp;
})(window_1.WindowCmp);
exports.TerminalCmp = TerminalCmp;

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImRlc2t0b3AvYXBwbGljYXRpb24vdGVybWluYWwudHMiXSwibmFtZXMiOlsiVGVybWluYWxDbXAiLCJUZXJtaW5hbENtcC5jb25zdHJ1Y3RvciIsIlRlcm1pbmFsQ21wLnNldFRlcm1pbmFsIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7OztBQUFBLHFCQUFtRCxlQUFlLENBQUMsQ0FBQTtBQUNuRSx1QkFBc0IsaUJBQWlCLENBQUMsQ0FBQTtBQUV4Qyx5QkFBNEIsc0JBQXNCLENBQUMsQ0FBQTtBQUNuRCx1QkFBMEMsaUJBQWlCLENBQUMsQ0FBQTtBQUk1RDtJQWtKaUNBLCtCQUFTQTtJQU16Q0EscUJBQWdDQSxVQUFzQkE7UUF4SnZEQyxpQkFnTUNBO1FBdENPQSxpQkFBT0EsQ0FBQUE7UUFQWEEsY0FBU0EsR0FBR0EsRUFBRUEsQ0FBQUE7UUFHZEEsVUFBS0EsR0FBR0EsR0FBR0EsQ0FBQUE7UUFDZEEsV0FBTUEsR0FBR0EsR0FBR0EsQ0FBQUE7UUFJTEEsSUFBSUEsQ0FBQ0EsT0FBT0EsR0FBR0EsVUFBVUEsQ0FBQ0EsYUFBYUEsQ0FBQUE7UUFFdkNBLElBQUlBLENBQUNBLFNBQVNBLEVBQUVBLENBQUFBO1FBRXRCQSxVQUFVQSxDQUFDQTtZQUNWQSxLQUFJQSxDQUFDQSxXQUFXQSxFQUFFQSxDQUFBQTtRQUNuQkEsQ0FBQ0EsRUFBRUEsR0FBR0EsQ0FBQ0EsQ0FBQ0E7SUFDVEEsQ0FBQ0E7SUFFREQsaUNBQVdBLEdBQVhBO1FBQUFFLGlCQTJCQ0E7UUExQkFBLElBQUlBLElBQUlBLEdBQUdBLElBQUlBLFFBQVFBLEVBQUVBLENBQUFBO1FBQ3pCQSxJQUFJQSxNQUFNQSxHQUFHQSxFQUFFQSxDQUFDQSxPQUFPQSxDQUFDQSxTQUFTQSxHQUFDQSxNQUFNQSxDQUFDQSxRQUFRQSxDQUFDQSxJQUFJQSxDQUFDQSxDQUFBQTtRQUN2REEsSUFBSUEsT0FBT0EsR0FBR0EsSUFBSUEsQ0FBQ0EsTUFBTUEsQ0FBQ0EsWUFBWUEsR0FBQ0EsR0FBR0EsR0FBRUEsSUFBSUEsQ0FBQ0EsTUFBTUEsQ0FBQ0EsR0FBR0EsQ0FBQUE7UUFDM0RBLE1BQU1BLENBQUNBLElBQUlBLENBQUNBLGdCQUFnQkEsRUFBRUEsT0FBT0EsRUFBRUEsVUFBQ0EsT0FBT0E7WUFFOUNBLElBQUlBLENBQUNBLEVBQUVBLENBQUNBLE1BQU1BLEVBQUVBLFVBQVNBLElBQUlBO2dCQUM1QixNQUFNLENBQUMsSUFBSSxDQUFDLE1BQU0sR0FBQyxPQUFPLEVBQUUsSUFBSSxDQUFDLENBQUE7WUFDbEMsQ0FBQyxDQUFDQSxDQUFBQTtZQUVGQSxJQUFJQSxDQUFDQSxJQUFJQSxDQUFDQSxDQUFDQSxDQUFDQSxLQUFJQSxDQUFDQSxPQUFPQSxDQUFDQSxDQUFDQSxJQUFJQSxDQUFDQSxrQkFBa0JBLENBQUNBLENBQUNBLENBQUNBLENBQUNBLENBQUNBLENBQUFBO1lBRXREQSxNQUFNQSxDQUFDQSxFQUFFQSxDQUFDQSxNQUFNQSxHQUFDQSxPQUFPQSxFQUFFQSxVQUFTQSxJQUFJQTtnQkFDMUIsT0FBTyxDQUFDLEdBQUcsQ0FBQyxJQUFJLEVBQUMsSUFBSSxDQUFDLFFBQVEsRUFBRSxDQUFDLE9BQU8sQ0FBQyx5Q0FBeUMsRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFBO2dCQUNwRyxJQUFJLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxDQUFBO1lBQ2pCLENBQUMsQ0FBQ0EsQ0FBQUE7WUFFRkEsQ0FBQ0EsQ0FBQ0EsTUFBTUEsQ0FBQ0EsQ0FBQ0EsTUFBTUEsQ0FBQ0E7Z0JBQ2hCLElBQUksQ0FBQyxTQUFTLEVBQUUsQ0FBQTtnQkFDaEIsTUFBTSxDQUFDLElBQUksQ0FBQyxRQUFRLEdBQUMsT0FBTyxFQUFFO29CQUM3QixJQUFJLEVBQUUsSUFBSSxDQUFDLElBQUk7b0JBQ2YsSUFBSSxFQUFFLElBQUksQ0FBQyxJQUFJO2lCQUNmLENBQUMsQ0FBQTtZQUNILENBQUMsQ0FBQ0EsQ0FBQUE7WUFFRkEsQ0FBQ0EsQ0FBQ0EsTUFBTUEsQ0FBQ0EsQ0FBQ0EsT0FBT0EsQ0FBQ0EsUUFBUUEsQ0FBQ0EsQ0FBQUE7UUFDNUJBLENBQUNBLENBQUNBLENBQUNBO0lBQ0pBLENBQUNBO0lBMUNFRjtRQUFDQSxZQUFLQSxFQUFFQTs7T0FBQ0EsK0JBQU1BLFVBQUFBO0lBckpuQkE7UUFBQ0EsZ0JBQVNBLENBQUNBO1lBQ1BBLFFBQVFBLEVBQUVBLFVBQVVBO1lBQ3BCQSxRQUFRQSxFQUFFQSx1QkFBY0EsQ0FBQ0EsT0FBT0EsQ0FBQ0EsY0FBY0EsRUFBQ0EsaU9BSS9DQSxDQUFDQTtZQUNGQSxNQUFNQSxFQUFFQSxDQUFDQSwwaUdBdUlSQSxDQUFDQTtZQUNGQSxVQUFVQSxFQUFFQSxDQUFDQSxnQkFBT0EsRUFBRUEsc0JBQVdBLENBQUNBO1NBQ3JDQSxDQUFDQTtRQVFXQSxXQUFDQSxhQUFNQSxDQUFDQSxpQkFBVUEsQ0FBQ0EsQ0FBQUE7O29CQXdDL0JBO0lBQURBLGtCQUFDQTtBQUFEQSxDQWhNQSxBQWdNQ0EsRUE5Q2dDLGtCQUFTLEVBOEN6QztBQTlDWSxtQkFBVyxjQThDdkIsQ0FBQSIsImZpbGUiOiJkZXNrdG9wL2FwcGxpY2F0aW9uL3Rlcm1pbmFsLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtDb21wb25lbnQsIEluamVjdCwgRWxlbWVudFJlZiwgSW5wdXR9IGZyb20gJ2FuZ3VsYXIyL2NvcmUnO1xuaW1wb3J0IHtOZ1N0eWxlfSBmcm9tICdhbmd1bGFyMi9jb21tb24nO1xuaW1wb3J0IHtkaWFsb2d9IGZyb20gJy4uL3Rvb2xzL3V0aWwnO1xuaW1wb3J0IHsgU2hvcnRjdXRDbXAgfSBmcm9tICcuLi9zaG9ydGN1dC9zaG9ydGN1dCc7XG5pbXBvcnQgeyBXaW5kb3dDbXAsIHdpbmRvd1RlbXBsYXRlIH0gZnJvbSAnLi4vcGFuZWwvd2luZG93JztcblxuZGVjbGFyZSB2YXIgJCwgVGVybWluYWwsIGlvXG5cbkBDb21wb25lbnQoe1xuICAgIHNlbGVjdG9yOiAndGVybWluYWwnLFxuICAgIHRlbXBsYXRlOiB3aW5kb3dUZW1wbGF0ZS5yZXBsYWNlKCd7e19fYm9keV9ffX0nLGBcbiAgICAgICAgPGRpdiBjbGFzcz1cImJvZHlcIiBzdHlsZT1cIm92ZXJmbG93LXk6IGF1dG87aGVpZ2h0OjEwMCU7d2lkdGg6MTAwJTtwYWRkaW5nLXRvcDogMzBweDt0ZXh0LWFsaWduOmNlbnRlclwiPlxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cInRlcm1pbmFsLXdpbmRvd1wiIHN0eWxlPVwid2lkdGg6MTAwJTtoZWlnaHQ6MTAwJTtcIj48L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgYCksXG4gICAgc3R5bGVzOiBbYFxuXG5cblxuICAgICAgLnBhbmVse1xuICAgICAgXHRwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgICBcdGxlZnQ6MTAwcHg7XG4gICAgICBcdHRvcDoxMDBweDtcbiAgICAgIFx0Ym9yZGVyOjFweCBzb2xpZCAjY2NjO1xuICAgICAgXHRiYWNrZ3JvdW5kLWNvbG9yOiNmZmY7XG4gICAgICBcdGJvcmRlci1yYWRpdXM6MXB4O1xuICAgICAgfVxuXG5cbiAgICAgIC5wYW5lbCAuaGVhZGVye1xuICAgICAgXHR3aWR0aDoxMDAlO1xuICAgICAgICAgIGhlaWdodDozMHB4O1xuICAgICAgICAgIHRleHQtYWxpZ246IGxlZnQ7XG4gICAgICBcdGJhY2tncm91bmQtY29sb3I6I2VlZTtcbiAgICAgIH1cblxuICAgICAgLnBhbmVsLmZvY3VzIC5oZWFkZXIgIHtcbiAgICAgIFx0YmFja2dyb3VuZC1jb2xvcjpyZ2JhKDEzOCwxNjUsMjA0LDEpO1xuICAgICAgfVxuXG4gICAgICAucGFuZWwuZm9jdXMgIHtcbiAgICAgIFx0Ym9yZGVyLWNvbG9yOnJnYmEoMTM4LDE2NSwyMDQsMSk7XG4gICAgICB9XG5cbiAgICAgIC5wYW5lbCAuaGVhZGVyIC5pY29ue1xuICAgICAgICAgIGhlaWdodDogMjBweDsgICBcdFxuICAgICAgICAgIHdpZHRoOiAyMHB4O1xuICAgICAgICAgIGZsb2F0OiBsZWZ0O1xuICAgICAgICAgIG1hcmdpbjogNHB4O1xuICAgICAgICAgIGJhY2tncm91bmQtc2l6ZTogMjBweCAyMHB4O1xuICAgICAgfVxuXG4gICAgICAucGFuZWwgLmhlYWRlciAudGl0bGV7XG4gICAgICAgICAgcGFkZGluZy10b3A6IDVweDtcbiAgICAgICAgICBmbG9hdDogbGVmdDtcbiAgICAgIH1cblxuICAgICAgLnBhbmVsLXRpdGxlLWJ1dHRvbnMge1xuXG4gICAgICAgICAgaGVpZ2h0OjQwcHg7XG4gICAgICAgICAgZmxvYXQ6IHJpZ2h0O1xuICAgICAgXHRtYXJnaW4tdG9wOiAycHg7XG4gICAgICBcdG1hcmdpbi1yaWdodDogMnB4XG4gICAgICB9XG5cblxuICAgICAgLnBhbmVsLWJ0biB7XG4gICAgICAgICAgZmxvYXQ6IHJpZ2h0O1xuICAgICAgICAgIG1hcmdpbi1yaWdodDogMTBweDtcbiAgICAgICAgICBtYXJnaW4tdG9wOiA3cHg7XG4gICAgICAgICAgd2lkdGg6ODVweDtcbiAgICAgICAgICBmb250LXNpemU6MTNweDtcblx0XG4gICAgICB9XG5cbiAgICAgIC5pY29uLW1pbntcbiAgICAgICAgICBiYWNrZ3JvdW5kLWltYWdlOnVybCguLi8uLi9yZXNvdXJjZS9pbWFnZXMvaWNvbi9taW4yLnBuZyk7XG4gICAgICAgICAgd2lkdGg6NDBweDtcbiAgICAgICAgICBoZWlnaHQ6MTlweDtcbiAgICAgICAgICBmbG9hdDogbGVmdDtcbiAgICAgIH1cbiAgICAgIC5pY29uLW1heHtcbiAgICAgICAgICBiYWNrZ3JvdW5kLWltYWdlOnVybCguLi8uLi9yZXNvdXJjZS9pbWFnZXMvaWNvbi9tYXgyLnBuZyk7XG4gICAgICAgICAgd2lkdGg6NDBweDtcbiAgICAgICAgICBoZWlnaHQ6MTlweDtcbiAgICAgICAgICBmbG9hdDogbGVmdDtcbiAgICAgIH1cbiAgICAgIC5pY29uLWNsb3Nle1xuICAgICAgICAgIGJhY2tncm91bmQtaW1hZ2U6dXJsKC4uLy4uL3Jlc291cmNlL2ltYWdlcy9pY29uL2Nsb3NlMi5wbmcpO1xuICAgICAgICAgIHdpZHRoOjQwcHg7XG4gICAgICAgICAgaGVpZ2h0OjE5cHg7XG4gICAgICAgICAgZmxvYXQ6IGxlZnQ7XG4gICAgICB9XG5cbiAgICAgIC5pY29uLW1pbjpob3ZlcntcbiAgICAgIFx0YmFja2dyb3VuZC1pbWFnZTp1cmwoLi4vLi4vcmVzb3VyY2UvaW1hZ2VzL2ljb24vbWluLnBuZyk7XG4gICAgICB9XG5cbiAgICAgIC5pY29uLW1heDpob3ZlcntcbiAgICAgIFx0YmFja2dyb3VuZC1pbWFnZTp1cmwoLi4vLi4vcmVzb3VyY2UvaW1hZ2VzL2ljb24vbWF4LnBuZyk7XG4gICAgICB9XG5cbiAgICAgIC5pY29uLWNsb3NlOmhvdmVye1xuICAgICAgXHRiYWNrZ3JvdW5kLWltYWdlOnVybCguLi8uLi9yZXNvdXJjZS9pbWFnZXMvaWNvbi9jbG9zZS5wbmcpO1xuICAgICAgfVxuXG4gICAgICAvKndpbmRvdyovXG4gICAgICAucGFuZWwgLmRlc2lnbi1yZXNpemUtbGVmdCwgLmRlc2lnbi1yZXNpemUtcmlnaHQgICwgLmRlc2lnbi1yZXNpemUtYm90dG9tICwgLmRlc2lnbi1yZXNpemUtbGVmdC1ib3R0b20gLCAuZGVzaWduLXJlc2l6ZS1yaWdodC1ib3R0b217XG4gICAgICBcdGJhY2tncm91bmQ6I2I3YmZjYTtcbiAgICAgIFx0ZmxvYXQ6IGxlZnQ7XG4gICAgICBcdHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICAgIFx0b3BhY2l0eTogMDsgICAgICAgICAgICAgICAgLyogRmlyZWZveCwgU2FmYXJpKFdlYktpdCksIE9wZXJhLGNocm9tZS8gICAgZmlsdGVyOiBcImFscGhhKG9wYWNpdHk9NjApXCI7IC8qIElFIDggKi9cbiAgICAgIFx0ZmlsdGVyOiBhbHBoYShvcGFjaXR5PTApOyAgIC8qIElFIDQtNyAqL1xuICAgICAgfVxuICAgICAgLmRlc2lnbi1yZXNpemUtbGVmdHtcbiAgICAgIFx0d2lkdGg6NHB4O1xuICAgICAgXHRoZWlnaHQ6IDEwMCU7XG4gICAgICBcdGN1cnNvcjplLXJlc2l6ZTsgXG4gICAgICBcdGxlZnQ6MHB4O1xuICAgICAgXHR0b3A6MHB4O1xuICAgICAgfVxuICAgICAgLmRlc2lnbi1yZXNpemUtcmlnaHR7XG4gICAgICBcdHdpZHRoOjRweDtcbiAgICAgIFx0aGVpZ2h0OiAxMDAlO1xuICAgICAgXHRjdXJzb3I6ZS1yZXNpemU7IFxuICAgICAgXHRyaWdodDowcHg7XG4gICAgICBcdHRvcDowcHg7XG4gICAgICB9XG4gICAgICAuZGVzaWduLXJlc2l6ZS1ib3R0b217XG4gICAgICBcdGhlaWdodDo0cHg7XG4gICAgICBcdHdpZHRoOjEwMCU7XG4gICAgICBcdGN1cnNvcjpuLXJlc2l6ZTtcbiAgICAgIFx0b3ZlcmZsb3c6aGlkZGVuOyBcbiAgICAgIFx0bGVmdDowcHg7XG4gICAgICBcdGJvdHRvbTowcHg7XG4gICAgICB9XG4gICAgICAuZGVzaWduLXJlc2l6ZS1sZWZ0LWJvdHRvbXtcbiAgICAgIFx0aGVpZ2h0OjRweDtcbiAgICAgIFx0d2lkdGg6NHB4O1xuICAgICAgXHRjdXJzb3I6c3ctcmVzaXplOyBcbiAgICAgIFx0bGVmdDowcHg7XG4gICAgICBcdGJvdHRvbTowcHg7XG4gICAgICB9XG4gICAgICAuZGVzaWduLXJlc2l6ZS1yaWdodC1ib3R0b217XG4gICAgICBcdGhlaWdodDo0cHg7XG4gICAgICBcdHdpZHRoOjRweDtcbiAgICAgIFx0Y3Vyc29yOnNlLXJlc2l6ZTsgXG4gICAgICBcdHJpZ2h0OjBweDtcbiAgICAgIFx0Ym90dG9tOjBweDtcbiAgICAgIH1cbiAgICBgXSxcbiAgICBkaXJlY3RpdmVzOiBbTmdTdHlsZSwgU2hvcnRjdXRDbXBdXG59KVxuXG5leHBvcnQgY2xhc3MgVGVybWluYWxDbXAgZXh0ZW5kcyBXaW5kb3dDbXAge1xuICAgIHNob3J0Y3V0cyA9IFtdIFxuICAgIGVsZW1lbnQ6IGFueVxuICAgIEBJbnB1dCgpIGNvbmZpZ1xuICAgIHdpZHRoID0gNjMwXG5cdGhlaWdodCA9IDQwMFxuXHRjb25zdHJ1Y3RvcihASW5qZWN0KEVsZW1lbnRSZWYpIGVsZW1lbnRSZWY6IEVsZW1lbnRSZWYpe1xuICAgICAgICBcbiAgICAgICAgc3VwZXIoKVxuICAgICAgICB0aGlzLmVsZW1lbnQgPSBlbGVtZW50UmVmLm5hdGl2ZUVsZW1lbnRcbiAgICAgICAgXG4gICAgICAgIHRoaXMuc2V0RGlhbG9nKClcblx0XHRcblx0XHRzZXRUaW1lb3V0KCgpPT4ge1xuXHRcdFx0dGhpcy5zZXRUZXJtaW5hbCgpXG5cdFx0fSwgMTAwKTtcblx0fVxuXHRcblx0c2V0VGVybWluYWwoKXtcblx0XHR2YXIgdGVybSA9IG5ldyBUZXJtaW5hbCgpIFxuXHRcdHZhciBzb2NrZXQgPSBpby5jb25uZWN0KFwiaHR0cDovL1wiK3dpbmRvdy5sb2NhdGlvbi5ob3N0KVxuXHRcdHZhciB0ZXJtX2lkID0gdGhpcy5jb25maWcuY29udGFpbmVyX2lkKyfCpycrIHRoaXMuY29uZmlnLl9pZFxuXHRcdHNvY2tldC5lbWl0KCdjcmVhdGVUZXJtaW5hbCcsIHRlcm1faWQsICh0ZXJtX2lkKT0+XG5cdFx0e1xuXHRcdFx0dGVybS5vbignZGF0YScsIGZ1bmN0aW9uKGRhdGEpe1xuXHRcdFx0XHRzb2NrZXQuZW1pdCgnZGF0YScrdGVybV9pZCwgZGF0YSlcblx0XHRcdH0pXG4gICAgICAgICAgICBcblx0XHRcdHRlcm0ub3BlbigkKHRoaXMuZWxlbWVudCkuZmluZCgnLnRlcm1pbmFsLXdpbmRvdycpWzBdKVxuXHRcdFx0XG5cdFx0XHRzb2NrZXQub24oJ2RhdGEnK3Rlcm1faWQsIGZ1bmN0aW9uKGRhdGEpeyBcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygxMTExLGRhdGEudG9TdHJpbmcoKS5yZXBsYWNlKC9cXHgxQlxcWyhbMC05XXsxLDJ9KDtbMC05XXsxLDJ9KT8pP1ttfEtdL2csICcnKSlcblx0XHRcdFx0dGVybS53cml0ZShkYXRhKVxuXHRcdFx0fSlcblx0XHRcdFxuXHRcdFx0JCh3aW5kb3cpLnJlc2l6ZShmdW5jdGlvbigpe1xuXHRcdFx0XHR0ZXJtLnNpemVUb0ZpdCgpXG5cdFx0XHRcdHNvY2tldC5lbWl0KCdyZXNpemUnK3Rlcm1faWQsIHtcblx0XHRcdFx0XHRjb2xzOiB0ZXJtLmNvbHMsXG5cdFx0XHRcdFx0cm93czogdGVybS5yb3dzXG5cdFx0XHRcdH0pXG5cdFx0XHR9KVxuXHRcdFx0XG5cdFx0XHQkKHdpbmRvdykudHJpZ2dlcigncmVzaXplJylcblx0XHR9KTtcblx0fVxufVxuXG4iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=