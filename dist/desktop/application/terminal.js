var __extends = (this && this.__extends) || function (d, b) {
    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
    function __() { this.constructor = d; }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
};
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
var core_1 = require('angular2/core');
var common_1 = require('angular2/common');
var shortcut_1 = require('../shortcut/shortcut');
var window_1 = require('../panel/window');
var TerminalCmp = (function (_super) {
    __extends(TerminalCmp, _super);
    function TerminalCmp(elementRef) {
        var _this = this;
        _super.call(this);
        this.shortcuts = [];
        this.width = 630;
        this.height = 400;
        this.element = elementRef.nativeElement;
        this.setDialog();
        setTimeout(function () {
            _this.setTerminal();
        }, 100);
    }
    TerminalCmp.prototype.setTerminal = function () {
        var _this = this;
        var term = new Terminal();
        var socket = io.connect("http://" + window.location.host);
        var term_id = 'ubuntu-cuqsx' + 'ยง' + this.config._id;
        socket.emit('createTerminal', term_id, function (term_id) {
            term.on('data', function (data) {
                socket.emit('data' + term_id, data);
            });
            term.open($(_this.element).find('.terminal-window')[0]);
            socket.on('data' + term_id, function (data) {
                console.log(1111, data.toString().replace(/\x1B\[([0-9]{1,2}(;[0-9]{1,2})?)?[m|K]/g, ''));
                term.write(data);
            });
            $(window).resize(function () {
                term.sizeToFit();
                socket.emit('resize' + term_id, {
                    cols: term.cols,
                    rows: term.rows
                });
            });
            $(window).trigger('resize');
        });
    };
    __decorate([
        core_1.Input(), 
        __metadata('design:type', Object)
    ], TerminalCmp.prototype, "config", void 0);
    TerminalCmp = __decorate([
        core_1.Component({
            selector: 'terminal',
            template: window_1.windowTemplate.replace('{{__body__}}', "\n        <div class=\"body\" style=\"overflow-y: auto;height:100%;width:100%;padding-top: 30px;text-align:center\">\n            <div class=\"terminal-window\" style=\"width:100%;height:100%;\"></div>\n        </div>\n    "),
            styles: ["\n\n\n\n      .panel{\n      \tposition: absolute;\n      \tleft:100px;\n      \ttop:100px;\n      \tborder:1px solid #ccc;\n      \tbackground-color:#fff;\n      \tborder-radius:1px;\n      }\n\n\n      .panel .header{\n      \twidth:100%;\n          height:30px;\n          text-align: left;\n      \tbackground-color:#eee;\n      }\n\n      .panel.focus .header  {\n      \tbackground-color:rgba(138,165,204,1);\n      }\n\n      .panel.focus  {\n      \tborder-color:rgba(138,165,204,1);\n      }\n\n      .panel .header .icon{\n          height: 20px;   \t\n          width: 20px;\n          float: left;\n          margin: 4px;\n          background-size: 20px 20px;\n          background-image: url(\"../../resource/images/computer.ico\");\n      }\n\n      .panel .header .title{\n          padding-top: 5px;\n          float: left;\n      }\n\n      .panel-title-buttons {\n\n          height:40px;\n          float: right;\n      \tmargin-top: 2px;\n      \tmargin-right: 2px\n      }\n\n\n      .panel-btn {\n          float: right;\n          margin-right: 10px;\n          margin-top: 7px;\n          width:85px;\n          font-size:13px;\n\t\n      }\n\n      .icon-min{\n          background-image:url(../../resource/images/icon/min2.png);\n          width:40px;\n          height:19px;\n          float: left;\n      }\n      .icon-max{\n          background-image:url(../../resource/images/icon/max2.png);\n          width:40px;\n          height:19px;\n          float: left;\n      }\n      .icon-close{\n          background-image:url(../../resource/images/icon/close2.png);\n          width:40px;\n          height:19px;\n          float: left;\n      }\n\n      .icon-min:hover{\n      \tbackground-image:url(../../resource/images/icon/min.png);\n      }\n\n      .icon-max:hover{\n      \tbackground-image:url(../../resource/images/icon/max.png);\n      }\n\n      .icon-close:hover{\n      \tbackground-image:url(../../resource/images/icon/close.png);\n      }\n\n      /*window*/\n      .panel .design-resize-left, .design-resize-right  , .design-resize-bottom , .design-resize-left-bottom , .design-resize-right-bottom{\n      \tbackground:#b7bfca;\n      \tfloat: left;\n      \tposition: absolute;\n      \topacity: 0;                /* Firefox, Safari(WebKit), Opera,chrome/    filter: \"alpha(opacity=60)\"; /* IE 8 */\n      \tfilter: alpha(opacity=0);   /* IE 4-7 */\n      }\n      .design-resize-left{\n      \twidth:4px;\n      \theight: 100%;\n      \tcursor:e-resize; \n      \tleft:0px;\n      \ttop:0px;\n      }\n      .design-resize-right{\n      \twidth:4px;\n      \theight: 100%;\n      \tcursor:e-resize; \n      \tright:0px;\n      \ttop:0px;\n      }\n      .design-resize-bottom{\n      \theight:4px;\n      \twidth:100%;\n      \tcursor:n-resize;\n      \toverflow:hidden; \n      \tleft:0px;\n      \tbottom:0px;\n      }\n      .design-resize-left-bottom{\n      \theight:4px;\n      \twidth:4px;\n      \tcursor:sw-resize; \n      \tleft:0px;\n      \tbottom:0px;\n      }\n      .design-resize-right-bottom{\n      \theight:4px;\n      \twidth:4px;\n      \tcursor:se-resize; \n      \tright:0px;\n      \tbottom:0px;\n      }\n    "],
            directives: [common_1.NgStyle, shortcut_1.ShortcutCmp]
        }),
        __param(0, core_1.Inject(core_1.ElementRef)), 
        __metadata('design:paramtypes', [core_1.ElementRef])
    ], TerminalCmp);
    return TerminalCmp;
})(window_1.WindowCmp);
exports.TerminalCmp = TerminalCmp;

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImRlc2t0b3AvYXBwbGljYXRpb24vdGVybWluYWwudHMiXSwibmFtZXMiOlsiVGVybWluYWxDbXAiLCJUZXJtaW5hbENtcC5jb25zdHJ1Y3RvciIsIlRlcm1pbmFsQ21wLnNldFRlcm1pbmFsIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7OztBQUFBLHFCQUFtRCxlQUFlLENBQUMsQ0FBQTtBQUNuRSx1QkFBc0IsaUJBQWlCLENBQUMsQ0FBQTtBQUV4Qyx5QkFBNEIsc0JBQXNCLENBQUMsQ0FBQTtBQUNuRCx1QkFBMEMsaUJBQWlCLENBQUMsQ0FBQTtBQUk1RDtJQW1KaUNBLCtCQUFTQTtJQU16Q0EscUJBQWdDQSxVQUFzQkE7UUF6SnZEQyxpQkFpTUNBO1FBdENPQSxpQkFBT0EsQ0FBQUE7UUFQWEEsY0FBU0EsR0FBR0EsRUFBRUEsQ0FBQUE7UUFHZEEsVUFBS0EsR0FBR0EsR0FBR0EsQ0FBQUE7UUFDZEEsV0FBTUEsR0FBR0EsR0FBR0EsQ0FBQUE7UUFJTEEsSUFBSUEsQ0FBQ0EsT0FBT0EsR0FBR0EsVUFBVUEsQ0FBQ0EsYUFBYUEsQ0FBQUE7UUFFdkNBLElBQUlBLENBQUNBLFNBQVNBLEVBQUVBLENBQUFBO1FBRXRCQSxVQUFVQSxDQUFDQTtZQUNWQSxLQUFJQSxDQUFDQSxXQUFXQSxFQUFFQSxDQUFBQTtRQUNuQkEsQ0FBQ0EsRUFBRUEsR0FBR0EsQ0FBQ0EsQ0FBQ0E7SUFDVEEsQ0FBQ0E7SUFFREQsaUNBQVdBLEdBQVhBO1FBQUFFLGlCQTJCQ0E7UUExQkFBLElBQUlBLElBQUlBLEdBQUdBLElBQUlBLFFBQVFBLEVBQUVBLENBQUFBO1FBRXpCQSxJQUFJQSxNQUFNQSxHQUFHQSxFQUFFQSxDQUFDQSxPQUFPQSxDQUFDQSxTQUFTQSxHQUFDQSxNQUFNQSxDQUFDQSxRQUFRQSxDQUFDQSxJQUFJQSxDQUFDQSxDQUFBQTtRQUN2REEsSUFBSUEsT0FBT0EsR0FBR0EsY0FBY0EsR0FBQ0EsR0FBR0EsR0FBRUEsSUFBSUEsQ0FBQ0EsTUFBTUEsQ0FBQ0EsR0FBR0EsQ0FBQUE7UUFDakRBLE1BQU1BLENBQUNBLElBQUlBLENBQUNBLGdCQUFnQkEsRUFBRUEsT0FBT0EsRUFBRUEsVUFBQ0EsT0FBT0E7WUFFOUNBLElBQUlBLENBQUNBLEVBQUVBLENBQUNBLE1BQU1BLEVBQUVBLFVBQVNBLElBQUlBO2dCQUM1QixNQUFNLENBQUMsSUFBSSxDQUFDLE1BQU0sR0FBQyxPQUFPLEVBQUUsSUFBSSxDQUFDLENBQUE7WUFDbEMsQ0FBQyxDQUFDQSxDQUFBQTtZQUNGQSxJQUFJQSxDQUFDQSxJQUFJQSxDQUFDQSxDQUFDQSxDQUFDQSxLQUFJQSxDQUFDQSxPQUFPQSxDQUFDQSxDQUFDQSxJQUFJQSxDQUFDQSxrQkFBa0JBLENBQUNBLENBQUNBLENBQUNBLENBQUNBLENBQUNBLENBQUFBO1lBRXREQSxNQUFNQSxDQUFDQSxFQUFFQSxDQUFDQSxNQUFNQSxHQUFDQSxPQUFPQSxFQUFFQSxVQUFTQSxJQUFJQTtnQkFDMUIsT0FBTyxDQUFDLEdBQUcsQ0FBQyxJQUFJLEVBQUMsSUFBSSxDQUFDLFFBQVEsRUFBRSxDQUFDLE9BQU8sQ0FBQyx5Q0FBeUMsRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFBO2dCQUNwRyxJQUFJLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxDQUFBO1lBQ2pCLENBQUMsQ0FBQ0EsQ0FBQUE7WUFFRkEsQ0FBQ0EsQ0FBQ0EsTUFBTUEsQ0FBQ0EsQ0FBQ0EsTUFBTUEsQ0FBQ0E7Z0JBQ2hCLElBQUksQ0FBQyxTQUFTLEVBQUUsQ0FBQTtnQkFDaEIsTUFBTSxDQUFDLElBQUksQ0FBQyxRQUFRLEdBQUMsT0FBTyxFQUFFO29CQUM3QixJQUFJLEVBQUUsSUFBSSxDQUFDLElBQUk7b0JBQ2YsSUFBSSxFQUFFLElBQUksQ0FBQyxJQUFJO2lCQUNmLENBQUMsQ0FBQTtZQUNILENBQUMsQ0FBQ0EsQ0FBQUE7WUFFRkEsQ0FBQ0EsQ0FBQ0EsTUFBTUEsQ0FBQ0EsQ0FBQ0EsT0FBT0EsQ0FBQ0EsUUFBUUEsQ0FBQ0EsQ0FBQUE7UUFDNUJBLENBQUNBLENBQUNBLENBQUNBO0lBQ0pBLENBQUNBO0lBMUNFRjtRQUFDQSxZQUFLQSxFQUFFQTs7T0FBQ0EsK0JBQU1BLFVBQUFBO0lBdEpuQkE7UUFBQ0EsZ0JBQVNBLENBQUNBO1lBQ1BBLFFBQVFBLEVBQUVBLFVBQVVBO1lBQ3BCQSxRQUFRQSxFQUFFQSx1QkFBY0EsQ0FBQ0EsT0FBT0EsQ0FBQ0EsY0FBY0EsRUFBQ0EsaU9BSS9DQSxDQUFDQTtZQUNGQSxNQUFNQSxFQUFFQSxDQUFDQSxvbkdBd0lSQSxDQUFDQTtZQUNGQSxVQUFVQSxFQUFFQSxDQUFDQSxnQkFBT0EsRUFBRUEsc0JBQVdBLENBQUNBO1NBQ3JDQSxDQUFDQTtRQVFXQSxXQUFDQSxhQUFNQSxDQUFDQSxpQkFBVUEsQ0FBQ0EsQ0FBQUE7O29CQXdDL0JBO0lBQURBLGtCQUFDQTtBQUFEQSxDQWpNQSxBQWlNQ0EsRUE5Q2dDLGtCQUFTLEVBOEN6QztBQTlDWSxtQkFBVyxjQThDdkIsQ0FBQSIsImZpbGUiOiJkZXNrdG9wL2FwcGxpY2F0aW9uL3Rlcm1pbmFsLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtDb21wb25lbnQsIEluamVjdCwgRWxlbWVudFJlZiwgSW5wdXR9IGZyb20gJ2FuZ3VsYXIyL2NvcmUnO1xuaW1wb3J0IHtOZ1N0eWxlfSBmcm9tICdhbmd1bGFyMi9jb21tb24nO1xuaW1wb3J0IHtkaWFsb2d9IGZyb20gJy4uL3Rvb2xzL3V0aWwnO1xuaW1wb3J0IHsgU2hvcnRjdXRDbXAgfSBmcm9tICcuLi9zaG9ydGN1dC9zaG9ydGN1dCc7XG5pbXBvcnQgeyBXaW5kb3dDbXAsIHdpbmRvd1RlbXBsYXRlIH0gZnJvbSAnLi4vcGFuZWwvd2luZG93JztcblxuZGVjbGFyZSB2YXIgJCwgVGVybWluYWwsIGlvXG5cbkBDb21wb25lbnQoe1xuICAgIHNlbGVjdG9yOiAndGVybWluYWwnLFxuICAgIHRlbXBsYXRlOiB3aW5kb3dUZW1wbGF0ZS5yZXBsYWNlKCd7e19fYm9keV9ffX0nLGBcbiAgICAgICAgPGRpdiBjbGFzcz1cImJvZHlcIiBzdHlsZT1cIm92ZXJmbG93LXk6IGF1dG87aGVpZ2h0OjEwMCU7d2lkdGg6MTAwJTtwYWRkaW5nLXRvcDogMzBweDt0ZXh0LWFsaWduOmNlbnRlclwiPlxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cInRlcm1pbmFsLXdpbmRvd1wiIHN0eWxlPVwid2lkdGg6MTAwJTtoZWlnaHQ6MTAwJTtcIj48L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgYCksXG4gICAgc3R5bGVzOiBbYFxuXG5cblxuICAgICAgLnBhbmVse1xuICAgICAgXHRwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgICBcdGxlZnQ6MTAwcHg7XG4gICAgICBcdHRvcDoxMDBweDtcbiAgICAgIFx0Ym9yZGVyOjFweCBzb2xpZCAjY2NjO1xuICAgICAgXHRiYWNrZ3JvdW5kLWNvbG9yOiNmZmY7XG4gICAgICBcdGJvcmRlci1yYWRpdXM6MXB4O1xuICAgICAgfVxuXG5cbiAgICAgIC5wYW5lbCAuaGVhZGVye1xuICAgICAgXHR3aWR0aDoxMDAlO1xuICAgICAgICAgIGhlaWdodDozMHB4O1xuICAgICAgICAgIHRleHQtYWxpZ246IGxlZnQ7XG4gICAgICBcdGJhY2tncm91bmQtY29sb3I6I2VlZTtcbiAgICAgIH1cblxuICAgICAgLnBhbmVsLmZvY3VzIC5oZWFkZXIgIHtcbiAgICAgIFx0YmFja2dyb3VuZC1jb2xvcjpyZ2JhKDEzOCwxNjUsMjA0LDEpO1xuICAgICAgfVxuXG4gICAgICAucGFuZWwuZm9jdXMgIHtcbiAgICAgIFx0Ym9yZGVyLWNvbG9yOnJnYmEoMTM4LDE2NSwyMDQsMSk7XG4gICAgICB9XG5cbiAgICAgIC5wYW5lbCAuaGVhZGVyIC5pY29ue1xuICAgICAgICAgIGhlaWdodDogMjBweDsgICBcdFxuICAgICAgICAgIHdpZHRoOiAyMHB4O1xuICAgICAgICAgIGZsb2F0OiBsZWZ0O1xuICAgICAgICAgIG1hcmdpbjogNHB4O1xuICAgICAgICAgIGJhY2tncm91bmQtc2l6ZTogMjBweCAyMHB4O1xuICAgICAgICAgIGJhY2tncm91bmQtaW1hZ2U6IHVybChcIi4uLy4uL3Jlc291cmNlL2ltYWdlcy9jb21wdXRlci5pY29cIik7XG4gICAgICB9XG5cbiAgICAgIC5wYW5lbCAuaGVhZGVyIC50aXRsZXtcbiAgICAgICAgICBwYWRkaW5nLXRvcDogNXB4O1xuICAgICAgICAgIGZsb2F0OiBsZWZ0O1xuICAgICAgfVxuXG4gICAgICAucGFuZWwtdGl0bGUtYnV0dG9ucyB7XG5cbiAgICAgICAgICBoZWlnaHQ6NDBweDtcbiAgICAgICAgICBmbG9hdDogcmlnaHQ7XG4gICAgICBcdG1hcmdpbi10b3A6IDJweDtcbiAgICAgIFx0bWFyZ2luLXJpZ2h0OiAycHhcbiAgICAgIH1cblxuXG4gICAgICAucGFuZWwtYnRuIHtcbiAgICAgICAgICBmbG9hdDogcmlnaHQ7XG4gICAgICAgICAgbWFyZ2luLXJpZ2h0OiAxMHB4O1xuICAgICAgICAgIG1hcmdpbi10b3A6IDdweDtcbiAgICAgICAgICB3aWR0aDo4NXB4O1xuICAgICAgICAgIGZvbnQtc2l6ZToxM3B4O1xuXHRcbiAgICAgIH1cblxuICAgICAgLmljb24tbWlue1xuICAgICAgICAgIGJhY2tncm91bmQtaW1hZ2U6dXJsKC4uLy4uL3Jlc291cmNlL2ltYWdlcy9pY29uL21pbjIucG5nKTtcbiAgICAgICAgICB3aWR0aDo0MHB4O1xuICAgICAgICAgIGhlaWdodDoxOXB4O1xuICAgICAgICAgIGZsb2F0OiBsZWZ0O1xuICAgICAgfVxuICAgICAgLmljb24tbWF4e1xuICAgICAgICAgIGJhY2tncm91bmQtaW1hZ2U6dXJsKC4uLy4uL3Jlc291cmNlL2ltYWdlcy9pY29uL21heDIucG5nKTtcbiAgICAgICAgICB3aWR0aDo0MHB4O1xuICAgICAgICAgIGhlaWdodDoxOXB4O1xuICAgICAgICAgIGZsb2F0OiBsZWZ0O1xuICAgICAgfVxuICAgICAgLmljb24tY2xvc2V7XG4gICAgICAgICAgYmFja2dyb3VuZC1pbWFnZTp1cmwoLi4vLi4vcmVzb3VyY2UvaW1hZ2VzL2ljb24vY2xvc2UyLnBuZyk7XG4gICAgICAgICAgd2lkdGg6NDBweDtcbiAgICAgICAgICBoZWlnaHQ6MTlweDtcbiAgICAgICAgICBmbG9hdDogbGVmdDtcbiAgICAgIH1cblxuICAgICAgLmljb24tbWluOmhvdmVye1xuICAgICAgXHRiYWNrZ3JvdW5kLWltYWdlOnVybCguLi8uLi9yZXNvdXJjZS9pbWFnZXMvaWNvbi9taW4ucG5nKTtcbiAgICAgIH1cblxuICAgICAgLmljb24tbWF4OmhvdmVye1xuICAgICAgXHRiYWNrZ3JvdW5kLWltYWdlOnVybCguLi8uLi9yZXNvdXJjZS9pbWFnZXMvaWNvbi9tYXgucG5nKTtcbiAgICAgIH1cblxuICAgICAgLmljb24tY2xvc2U6aG92ZXJ7XG4gICAgICBcdGJhY2tncm91bmQtaW1hZ2U6dXJsKC4uLy4uL3Jlc291cmNlL2ltYWdlcy9pY29uL2Nsb3NlLnBuZyk7XG4gICAgICB9XG5cbiAgICAgIC8qd2luZG93Ki9cbiAgICAgIC5wYW5lbCAuZGVzaWduLXJlc2l6ZS1sZWZ0LCAuZGVzaWduLXJlc2l6ZS1yaWdodCAgLCAuZGVzaWduLXJlc2l6ZS1ib3R0b20gLCAuZGVzaWduLXJlc2l6ZS1sZWZ0LWJvdHRvbSAsIC5kZXNpZ24tcmVzaXplLXJpZ2h0LWJvdHRvbXtcbiAgICAgIFx0YmFja2dyb3VuZDojYjdiZmNhO1xuICAgICAgXHRmbG9hdDogbGVmdDtcbiAgICAgIFx0cG9zaXRpb246IGFic29sdXRlO1xuICAgICAgXHRvcGFjaXR5OiAwOyAgICAgICAgICAgICAgICAvKiBGaXJlZm94LCBTYWZhcmkoV2ViS2l0KSwgT3BlcmEsY2hyb21lLyAgICBmaWx0ZXI6IFwiYWxwaGEob3BhY2l0eT02MClcIjsgLyogSUUgOCAqL1xuICAgICAgXHRmaWx0ZXI6IGFscGhhKG9wYWNpdHk9MCk7ICAgLyogSUUgNC03ICovXG4gICAgICB9XG4gICAgICAuZGVzaWduLXJlc2l6ZS1sZWZ0e1xuICAgICAgXHR3aWR0aDo0cHg7XG4gICAgICBcdGhlaWdodDogMTAwJTtcbiAgICAgIFx0Y3Vyc29yOmUtcmVzaXplOyBcbiAgICAgIFx0bGVmdDowcHg7XG4gICAgICBcdHRvcDowcHg7XG4gICAgICB9XG4gICAgICAuZGVzaWduLXJlc2l6ZS1yaWdodHtcbiAgICAgIFx0d2lkdGg6NHB4O1xuICAgICAgXHRoZWlnaHQ6IDEwMCU7XG4gICAgICBcdGN1cnNvcjplLXJlc2l6ZTsgXG4gICAgICBcdHJpZ2h0OjBweDtcbiAgICAgIFx0dG9wOjBweDtcbiAgICAgIH1cbiAgICAgIC5kZXNpZ24tcmVzaXplLWJvdHRvbXtcbiAgICAgIFx0aGVpZ2h0OjRweDtcbiAgICAgIFx0d2lkdGg6MTAwJTtcbiAgICAgIFx0Y3Vyc29yOm4tcmVzaXplO1xuICAgICAgXHRvdmVyZmxvdzpoaWRkZW47IFxuICAgICAgXHRsZWZ0OjBweDtcbiAgICAgIFx0Ym90dG9tOjBweDtcbiAgICAgIH1cbiAgICAgIC5kZXNpZ24tcmVzaXplLWxlZnQtYm90dG9te1xuICAgICAgXHRoZWlnaHQ6NHB4O1xuICAgICAgXHR3aWR0aDo0cHg7XG4gICAgICBcdGN1cnNvcjpzdy1yZXNpemU7IFxuICAgICAgXHRsZWZ0OjBweDtcbiAgICAgIFx0Ym90dG9tOjBweDtcbiAgICAgIH1cbiAgICAgIC5kZXNpZ24tcmVzaXplLXJpZ2h0LWJvdHRvbXtcbiAgICAgIFx0aGVpZ2h0OjRweDtcbiAgICAgIFx0d2lkdGg6NHB4O1xuICAgICAgXHRjdXJzb3I6c2UtcmVzaXplOyBcbiAgICAgIFx0cmlnaHQ6MHB4O1xuICAgICAgXHRib3R0b206MHB4O1xuICAgICAgfVxuICAgIGBdLFxuICAgIGRpcmVjdGl2ZXM6IFtOZ1N0eWxlLCBTaG9ydGN1dENtcF1cbn0pXG5cbmV4cG9ydCBjbGFzcyBUZXJtaW5hbENtcCBleHRlbmRzIFdpbmRvd0NtcCB7XG4gICAgc2hvcnRjdXRzID0gW10gXG4gICAgZWxlbWVudDogYW55XG4gICAgQElucHV0KCkgY29uZmlnXG4gICAgd2lkdGggPSA2MzBcblx0aGVpZ2h0ID0gNDAwXG5cdGNvbnN0cnVjdG9yKEBJbmplY3QoRWxlbWVudFJlZikgZWxlbWVudFJlZjogRWxlbWVudFJlZil7XG4gICAgICAgXG4gICAgICAgIHN1cGVyKClcbiAgICAgICAgdGhpcy5lbGVtZW50ID0gZWxlbWVudFJlZi5uYXRpdmVFbGVtZW50XG4gICAgICAgIFxuICAgICAgICB0aGlzLnNldERpYWxvZygpXG5cdFx0XG5cdFx0c2V0VGltZW91dCgoKT0+IHtcblx0XHRcdHRoaXMuc2V0VGVybWluYWwoKVxuXHRcdH0sIDEwMCk7XG5cdH1cblx0XG5cdHNldFRlcm1pbmFsKCl7XG5cdFx0dmFyIHRlcm0gPSBuZXcgVGVybWluYWwoKVxuXHRcdC8vIHZhciBwYXRoID0gZG9jdW1lbnQubG9jYXRpb24udG9TdHJpbmcoKS5zcGxpdCgnLycpXG5cdFx0dmFyIHNvY2tldCA9IGlvLmNvbm5lY3QoXCJodHRwOi8vXCIrd2luZG93LmxvY2F0aW9uLmhvc3QpXG5cdFx0dmFyIHRlcm1faWQgPSAndWJ1bnR1LWN1cXN4JysnwqcnKyB0aGlzLmNvbmZpZy5faWRcblx0XHRzb2NrZXQuZW1pdCgnY3JlYXRlVGVybWluYWwnLCB0ZXJtX2lkLCAodGVybV9pZCk9PlxuXHRcdHtcblx0XHRcdHRlcm0ub24oJ2RhdGEnLCBmdW5jdGlvbihkYXRhKXtcblx0XHRcdFx0c29ja2V0LmVtaXQoJ2RhdGEnK3Rlcm1faWQsIGRhdGEpXG5cdFx0XHR9KVxuXHRcdFx0dGVybS5vcGVuKCQodGhpcy5lbGVtZW50KS5maW5kKCcudGVybWluYWwtd2luZG93JylbMF0pXG5cdFx0XHRcblx0XHRcdHNvY2tldC5vbignZGF0YScrdGVybV9pZCwgZnVuY3Rpb24oZGF0YSl7IFxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKDExMTEsZGF0YS50b1N0cmluZygpLnJlcGxhY2UoL1xceDFCXFxbKFswLTldezEsMn0oO1swLTldezEsMn0pPyk/W218S10vZywgJycpKVxuXHRcdFx0XHR0ZXJtLndyaXRlKGRhdGEpXG5cdFx0XHR9KVxuXHRcdFx0XG5cdFx0XHQkKHdpbmRvdykucmVzaXplKGZ1bmN0aW9uKCl7XG5cdFx0XHRcdHRlcm0uc2l6ZVRvRml0KClcblx0XHRcdFx0c29ja2V0LmVtaXQoJ3Jlc2l6ZScrdGVybV9pZCwge1xuXHRcdFx0XHRcdGNvbHM6IHRlcm0uY29scyxcblx0XHRcdFx0XHRyb3dzOiB0ZXJtLnJvd3Ncblx0XHRcdFx0fSlcblx0XHRcdH0pXG5cdFx0XHRcblx0XHRcdCQod2luZG93KS50cmlnZ2VyKCdyZXNpemUnKVxuXHRcdH0pO1xuXHR9XG59XG5cbiJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==